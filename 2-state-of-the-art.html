<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<title>Introduction</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
</head>
<body class="book">
<div id="header">
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel2">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_grails_framework">Grails framework</a></li>
<li><a href="#_oauth_2_0">OAuth 2.0</a></li>
<li><a href="#_asciidoctor">Asciidoctor</a></li>
<li><a href="#_gradle">Gradle</a></li>
<li><a href="#_similar_solution_spring_security">Similar solution: Spring Security</a></li>
<li><a href="#_conclusion">Conclusion</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph lead">
<p>This chapter explains the starting point with regards to authentication mechanisms in RESTful applications, as well as a
comparision between the existing alternatives.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_introduction">Introduction</h3>
<div class="paragraph">
<p>In the Grails framework, the option to perform authentication and authorisation is the Spring Security Core plugin.
Before going deeper into it, let&#8217;s describe first the foundations of the project.</p>
</div>
<div class="sect3">
<h4 id="_the_groovy_programming_language">The Groovy programming language</h4>
<div class="paragraph">
<p>Groovy <a href="#groovy">[groovy]</a> is developed to be a feature rich Java friendly programming language. The idea is to bring features we can find
in dynamic programming languages like Python, Ruby to the Java platform. The Java platform is widely supported and a lot
of developers know Java.</p>
</div>
<div class="paragraph">
<p>The Groovy web site gives one of the best definitions of Groovy: Groovy is an agile dynamic language for the Java Platform
with many features that are inspired by languages like Python, Ruby and Smalltalk, making them available to Java developers
using a Java-like syntax.</p>
</div>
<div class="paragraph">
<p>Groovy is closely tied to the Java platform. This means Groovy has a perfect fit for Java developers, because we get
advanced language features like closures, dynamic typing and the meta object protocol within the Java platform. Also we
can reuse Java libraries in our Groovy code.</p>
</div>
<div class="paragraph">
<p>Groovy is often called a scripting language, but this is not quite true. We can write scripts with Groovy, but also full
blown applications. Groovy is very flexible.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="sect4">
<h5 id="_features">Features</h5>
<div class="ulist">
<ul>
<li>
<p>Dynamic language</p>
</li>
<li>
<p>Duck typing</p>
</li>
<li>
<p>It is compiled into the Java Virtual Machine â€¢ Support closures</p>
</li>
<li>
<p>Support operators-overload</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_differences_with_java">Differences with Java</h5>
<div class="paragraph">
<p>Groovy tries to be as natural as possible for Java developers. Here we list all the major differences between Java and Groovy.</p>
</div>
<div class="sect5">
<h6 id="_default_imports">Default imports</h6>
<div class="paragraph">
<p>All these packages and classes are imported by default, i.e. you do not have to use an explicit import statement to use them:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. Default imports in Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">java.io.*
java.lang.*
java.math.BigDecimal
java.math.BigInteger
java.net.*
java.util.*
groovy.lang.*
groovy.util.*</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect5">
<h6 id="_multi_methods">Multi-methods</h6>
<div class="paragraph">
<p>In Groovy, the methods which will be invoked are chosen at runtime. This is called runtime dispatch or multi-methods. It
means that the method will be chosen based on the types of the arguments at runtime. In Java, this is the opposite: methods
are chosen at compile time, based on the declared types.</p>
</div>
<div class="paragraph">
<p>The following code, written as Java code, can be compiled in both Java and Groovy, but it will behave differently:</p>
</div>
<div class="listingblock">
<div class="title">Listing 2. Method dispatching code in Java/Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">int method(String arg) {
    return 1;
}
int method(Object arg) {
    return 2;
}
Object o = "Object";
int result = method(o);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In Java, you would have:</p>
</div>
<div class="listingblock">
<div class="title">Listing 3. Method dispatch in Java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">assertEquals(2, result);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Whereas in Groovy:</p>
</div>
<div class="listingblock">
<div class="title">Listing 4. Method dispatch in Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">assertEquals(1, result);</code></pre>
</div>
</div>
<div class="paragraph">
<p>That is because Java will use the static information type, which is that o is declared as an <code>Object</code>, whereas Groovy will
choose at runtime, when the method is actually called. Since it is called with a <code>String</code>, then the String version is called.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect5">
<h6 id="_array_initialisers">Array initialisers</h6>
<div class="paragraph">
<p>In Groovy, the <code>{ ... }</code> block is reserved for closures. That means that you cannot create array literals with this syntax:</p>
</div>
<div class="listingblock">
<div class="title">Listing 5. Invalid syntax to declare an array in Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">int[] array = { 1, 2, 3}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You actually have to use:</p>
</div>
<div class="listingblock">
<div class="title">Listing 6. Array declaration in Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">int[] array = [1,2,3]</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_package_scope_visibility">Package scope visibility</h6>
<div class="paragraph">
<p>In Groovy, omitting a modifier on a field doesn&#8217;t result in a package-private field like in Java:</p>
</div>
<div class="listingblock">
<div class="title">Listing 7. Default visibility in Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String name
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead, it is used to create a property, that is to say a private field, an associated getter and an associated setter.</p>
</div>
<div class="paragraph">
<p>It is possible to create a package-private field by annotating it with <code>@PackageScope</code>:</p>
</div>
<div class="listingblock">
<div class="title">Listing 8. Package scope visibility in Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Person {
    @PackageScope String name
}</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect5">
<h6 id="_arm_blocks">ARM blocks</h6>
<div class="paragraph">
<p>ARM (Automatic Resource Management) block from Java 7 are not supported in Groovy. Instead, Groovy provides various
methods relying on closures, which have the same effect while being more idiomatic. For example:</p>
</div>
<div class="listingblock">
<div class="title">Listing 9. Automatic resource management in Java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Path file = Paths.get("/path/to/file");
Charset charset = Charset.forName("UTF-8");
try (BufferedReader reader = Files.newBufferedReader(file, charset)) {
    String line;
    while ((line = reader.readLine()) != null) {
        System.out.println(line);
    }

} catch (IOException e) {
    e.printStackTrace();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>can be written like this:</p>
</div>
<div class="listingblock">
<div class="title">Listing 10. Using Groovy closures as an ARM alternative</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">new File('/path/to/file').eachLine('UTF-8') {
   println it
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or, if you want a version closer to Java:</p>
</div>
<div class="listingblock">
<div class="title">Listing 11. ARM in Groovy, alternative edition</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">new File('/path/to/file').withReader('UTF-8') { reader -&gt;
   reader.eachLine {
       println it
   }
}</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect5">
<h6 id="_inner_classes">Inner classes</h6>
<div class="paragraph">
<p>The implementation of anonymous inner classes and nested classes follows the Java lead, but you should not take out the
Java Language Spec and keep shaking the head about things that are different. The implementation done looks much like what
we do for <code>groovy.lang.Closure</code>, with some benefits and some differences. Accessing private fields and methods for example
can become a problem, but on the other hand local variables don&#8217;t have to be final.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Static inner classes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of static inner class:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. Static inner class in Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class A {
    static class B {}
}

new A.B()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The usage of static inner classes is the best supported one. If you absolutely need an inner class, you should make it a static one.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Anonymous Inner Classes</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Listing 13. Anonymous inner class in Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">import java.util.concurrent.CountDownLatch
import java.util.concurrent.TimeUnit

CountDownLatch called = new CountDownLatch(1)

Timer timer = new Timer()
timer.schedule(new TimerTask() {
    void run() {
        called.countDown()
    }
}, 0)

assert called.await(10, TimeUnit.SECONDS)</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="ulist">
<ul>
<li>
<p>Creating Instances of Non-Static Inner Classes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In Java you can do this:</p>
</div>
<div class="listingblock">
<div class="title">Listing 14. Non-static inner classes in Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class Y {
    public class X {}
    public X foo() {
        return new X();
    }
    public static X createX(Y y) {
        return y.new X();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovy doesn&#8217;t support the <code>y.new X()</code> syntax. Instead, you have to write <code>new X(y)</code>, like in the code below:</p>
</div>
<div class="listingblock">
<div class="title">Listing 15. Instantiating non-static inner classes in Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">public class Y {
    public class X {}
    public X foo() {
        return new X()
    }
    public static X createX(Y y) {
        return new X(y)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Caution though, Groovy supports calling methods with one parameter without giving an argument. The parameter will then
have the value null. Basically the same rules apply to calling a constructor. There is a danger that you will write
<code>new X()</code> instead of <code>new X(this)</code> for example. Since this might also be the regular way we have not yet found a good way
to prevent this problem.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect5">
<h6 id="_lambdas">Lambdas</h6>
<div class="paragraph">
<p>Java 8 supports lambdas and method references:</p>
</div>
<div class="listingblock">
<div class="title">Listing 16. Lambdas in Java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Runnable run = () -&gt; System.out.println("Run");
list.forEach(System.out::println);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Java 8 lambdas can be more or less considered as anonymous inner classes. Groovy doesn&#8217;t support that syntax, but has
closures instead:</p>
</div>
<div class="listingblock">
<div class="title">Listing 17. Closures in Groovy as an alternative to Java lambdas</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Runnable run = { println 'run' }
list.each { println it } // or list.each(this.&amp;println)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_gstrings">GStrings</h6>
<div class="paragraph">
<p>As double-quoted string literals are interpreted as <code>GString</code> values, Groovy may fail with compile error or produce
subtly different code if a class with <code>String</code> literal containing a dollar character is compiled with Groovy and Java compiler.</p>
</div>
<div class="paragraph">
<p>While typically, Groovy will auto-cast between <code>GString</code> and <code>String</code> if an API declares the type of a parameter, beware
of Java APIs that accept an Object parameter and then check the actual type.</p>
</div>
</div>
<div class="sect5">
<h6 id="_string_and_character_literals">String and Character literals</h6>
<div class="paragraph">
<p>Singly-quoted literals in Groovy are used for <code>String</code>, and double-quoted result in <code>String</code> or <code>GString</code>, depending
whether there is interpolation in the literal.</p>
</div>
<div class="listingblock">
<div class="title">Listing 18. String definitions in Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">assert 'c'.getClass() == String
assert "c".getClass() == String
assert "c${1}".getClass() in GString</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Groovy will automatically cast a single-character <code>String</code> to char when assigning to a variable of type <code>char</code>. When
calling methods with arguments of type char we need to either cast explicitly or make sure the value has been cast in
advance.</p>
</div>
<div class="listingblock">
<div class="title">Listing 19. Groovy String to char conversion</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">char a = 'a'
assert Character.digit(a, 16) == 10 : 'But Groovy does boxing'
assert Character.digit((char) 'a', 16) == 10

try {
  assert Character.digit('a', 16)==10
  assert false: 'Need explicit cast'
} catch(MissingMethodException e) {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovy supports two styles of casting and in the case of casting to <code>char</code> there are subtle differences when casting a
multi-char strings. The Groovy style cast is more lenient and will take the first character, while the C-style cast will
fail with exception.</p>
</div>
<div class="listingblock">
<div class="title">Listing 20. String casting in Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// for single char strings, both are the same
assert ((char) "c").class == Character
assert ("c" as char).class == Character

// for multi char strings they are not
try {
  ((char) 'cx') == 'c'
  assert false: 'will fail - not castable'
} catch(GroovyCastException e) {
}
assert ('cx' as char) == 'c'
assert 'cx'.asType(char) == 'c'</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_behaviour_of_code_code">Behaviour of <code>==</code></h6>
<div class="paragraph">
<p>In Java <code>==</code> means equality of primitive types or identity for objects. In Groovy <code>==</code> translates to <code>a.compareTo(b)==0</code>,
if they are <code>Comparable</code>, and <code>a.equals(b)</code> otherwise. To check for identity, there is <code>is</code>. E.g. <code>a.is(b)</code>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect5">
<h6 id="_different_keywords">Different keywords</h6>
<div class="paragraph">
<p>There are a few more keywords in Groovy than in Java. Don&#8217;t use them for variable names etc.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>in</code>.</p>
</li>
<li>
<p><code>trait</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_examples">Examples</h4>
<div class="listingblock">
<div class="title">Listing 21. Hello world in Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">println "hello world" // (1)</code></pre>
</div>
</div>
<div class="paragraph">
<p>(1) The simplest Groovy code is a script. As this is going to be compiled to Java anyways, the Groovy compiler takes
care of all the noise required by Java: it generates a class with a <code>main</code> method calling your code.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="title">Listing 22. Basic syntax elements in Groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Team { // (1)

    String name // (1)
    BigDecimal budget
    List&lt;Player&gt; squad = [] // (2)

}

class Player { String name, int age }

Team realMadrid = new Team(name: 'Real Madrid CF', players:[new Player(name: 'Cristiano Ronaldo'), ...]) (3)
realMadrid.budget = 100_000_000 // (4)

def youngPlayers = realMadrid.players.collect { it.age &lt; 20} // (5)</code></pre>
</div>
</div>
<div class="paragraph">
<p>(1) Groovy applies common sense default for visibilities: public for classes and methods and private for attributes</p>
</div>
<div class="paragraph">
<p>(2) There is native grammar syntax for lists (<code>[a,b,c]</code>) and maps (<code>[a: b, c: d]</code>)</p>
</div>
<div class="paragraph">
<p>(3) Groovy enhances constructors with named parameters</p>
</div>
<div class="paragraph">
<p>(4) Getters and setters are auto-generated and hidden. Property-access assignments are calling implicit setters. It also
    honours Java 7 Project Coin&#8217;s features such as numeral literal formatting</p>
</div>
<div class="paragraph">
<p>(5) Groovy super-vitamines the JDK with many methods in the collections, file, etc API&#8217;s with the so called GDK.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_grails_framework">Grails framework</h3>
<div class="paragraph">
<p>Java web development as it stands today is dramatically more complicated than it needs to be. Most modern web frameworks
in the Java space are over complicated and don&#8217;t embrace the Don&#8217;t Repeat Yourself (DRY) principles.</p>
</div>
<div class="paragraph">
<p>Dynamic frameworks like Rails, Django and TurboGears helped pave the way to a more modern way of thinking about web
applications. Grails builds on these concepts and dramatically reduces the complexity of building web applications on the
Java platform. What makes it different, however, is that it does so by building on already established Java technologies
like Spring and Hibernate.</p>
</div>
<div class="paragraph">
<p>Grails <a href="#grails">[grails]</a> is a full stack framework and attempts to solve as many pieces of the web development puzzle through the core
technology and its associated plugins. Included out the box are things like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An easy to use Object Relational Mapping (ORM) layer built on Hibernate</p>
</li>
<li>
<p>An expressive view technology called Groovy Server Pages (GSP)</p>
</li>
<li>
<p>A controller layer built on Spring MVC</p>
</li>
<li>
<p>An interactive command line environment and build system based on Gradle</p>
</li>
<li>
<p>An embedded Tomcat container which is configured for on the fly reloading</p>
</li>
<li>
<p>Dependency injection with the inbuilt Spring container</p>
</li>
<li>
<p>Support for internationalization (i18n) built on Spring&#8217;s core MessageSource concept</p>
</li>
<li>
<p>A transactional service layer built on Spring&#8217;s transaction abstraction</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All of these are made easy to use through the power of the Groovy language and the extensive use of Domain Specific Languages (DSLs)</p>
</div>
<div style="page-break-after: always;"></div>
<div class="sect3">
<h4 id="_domains">Domains</h4>
<div class="paragraph">
<p>Grails has an abstract domain layer called GORM: Grails Object Relational Mapping. Despite of it&#8217;s name, it has support
for multiple data storage systems, bot SQL and No-SQL, such as Hibernate (for relational databases), MongoDB, CouchDB,
Neo4j and Redis.</p>
</div>
<div class="paragraph">
<p>This is an example of how Grails domains work:</p>
</div>
<div class="listingblock">
<div class="title">Listing 23. Grails GORM examples</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String name
    Integer age
    Date lastVisit

    static hasMany = [pets: Pet]
}

class Pet {
    String name

    static belongsTo = [owner: Person]
}

//Create
def p = new Person(name: "Fred", age: 40, lastVisit: new Date())
p.save()

//Read
def fred = Person.get(1)
assert 'Fred' == fred.name

//Update
def bob = Person.findByName("Fred")
bob.name = "Bob"
bob.save(flush: true)
assert 'Bob' == Person.get(1).name

//Delete
bob.delete()

//Relationships
def john == new Person(name: "John", age: 40, lastVisit: new Date()).addToPets(name: "floppy").save()
assert Pet.get(1).name == "floppy"</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="_the_web_layer">The web layer</h4>
<div class="sect4">
<h5 id="_controllers">Controllers</h5>
<div class="paragraph">
<p>A controller handles requests and creates or prepares the response. A controller can generate the response directly or
delegate to a view.</p>
</div>
<div class="listingblock">
<div class="title">Listing 24. Grails Controller examples</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">import grails.converters.JSON

class PersonController {

    /** Accessible through /person */
    def index() {
        List&lt;Person&gt; people = Person.list()

        //Generates a JSON response directly
        render people as JSON
    }

    /** Accessible through /person/show/123 */
    def show(Long id) {
        Person person = Person.get(id)
        if (person) {
            //Delegates to /grails-app/views/person/show.gsp, where the model is the map [person: person]
            return [person: person]
        } else {
            response.sendError(404)
        }
    }
}</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect4">
<h5 id="_views">Views</h5>
<div class="paragraph">
<p>Groovy Servers Pages (or GSP for short) is Grails' view technology. It is designed to be familiar for users of
technologies such as ASP and JSP, but to be far more flexible and intuitive.</p>
</div>
<div class="paragraph">
<p>GSP&#8217;s live in the <code>grails-app/views</code> directory and are typically rendered automatically (by convention) or with the
render method such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">render(view: "index")</code></pre>
</div>
</div>
<div class="paragraph">
<p>A GSP is typically a mix of mark-up and GSP tags which aid in view rendering.</p>
</div>
<div class="paragraph">
<p>Although it is possible to have Groovy logic embedded in your GSP, the practice is strongly discouraged. Mixing mark-up
and code is a bad thing and most GSP pages contain no code and needn&#8217;t do so.</p>
</div>
<div class="paragraph">
<p>A GSP typically has a "model" which is a set of variables that are used for view rendering. The model is passed to the
GSP view from a controller. Given the <code>show</code> action from the controllers example, a GSP could look like this:</p>
</div>
<div class="listingblock">
<div class="title">Listing 25. Grails GSP example</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;html&gt;
  &lt;body&gt;
    &lt;h1&gt;${person.name}&lt;/h1&gt;
    &lt;p&gt;Pets:&lt;/p&gt;
    &lt;ul&gt;
      &lt;g:each in="${person.pets}" var="pet"&gt;
        &lt;li&gt;${pet.name}&lt;/li&gt;
      &lt;/g:each&gt;
    &lt;/ul&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_oauth_2_0">OAuth 2.0</h3>
<div class="paragraph">
<p>The OAuth 2.0 authorization framework <a href="#oauth2">[oauth2]</a> enables a third-party application to obtain limited access to an HTTP service,
either on behalf of a resource owner by orchestrating an approval interaction between the resource owner and the HTTP
service, or by allowing the third-party application to obtain access on its own behalf.  This specification replaces and
obsoletes the OAuth 1.0 protocol described in RFC 5849.</p>
</div>
<div class="sect3">
<h4 id="_roles">Roles</h4>
<div class="paragraph">
<p>OAuth defines four roles:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Resource owner</strong>: an entity capable of granting access to a protected resource. When the resource owner is a person, it
is referred to as an end-user.</p>
</li>
<li>
<p><strong>Resource server</strong>:  the server hosting the protected resources, capable of accepting and responding to protected resource
requests using access tokens.</p>
</li>
<li>
<p><strong>Client</strong>: an application making protected resource requests on behalf of the resource owner and with its authorization.
The term "client" does not imply any particular implementation characteristics (e.g., whether the application executes
on a server, a desktop, or other devices).</p>
</li>
<li>
<p><strong>Authorization server</strong>: the server issuing access tokens to the client after successfully authenticating the resource
owner and obtaining authorization.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The interaction between the authorization server and resource server is beyond the scope of the specification.  The
authorization server may be the same server as the resource server or a separate entity. A single authorization server
may issue access tokens accepted by multiple resource servers.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="oauth-flow.png" alt="oauth flow">
</div>
<div class="title">Figure 1. OAuth 2.0 flow</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The client requests authorization from the resource owner. The authorization request can be made directly to the
resource owner (as shown), or preferably indirectly via the authorization server as an intermediary.</p>
</li>
<li>
<p>The client receives an authorization grant, which is a credential representing the resource owner&#8217;s authorization,
expressed using one of four grant types defined in this specification or using an extension grant type. The
authorization grant type depends on the method used by the client to request authorization and the types supported by
the authorization server.</p>
</li>
<li>
<p>The client requests an access token by authenticating with the authorization server and presenting the
authorization grant.</p>
</li>
<li>
<p>The authorization server authenticates the client and validates the authorization grant, and if valid, issues an
access token.</p>
</li>
<li>
<p>The client requests the protected resource from the resource server and authenticates by presenting the access token.</p>
</li>
<li>
<p>The resource server validates the access token, and if valid, serves the request.</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_asciidoctor">Asciidoctor</h3>
<div class="paragraph">
<p>This document has been produced using Asciidoctor.</p>
</div>
<div class="paragraph">
<p>Asciidoctor<a href="#asciidoctor">[asciidoctor]</a> is a fast text processor and publishing toolchain for converting AsciiDoc content to HTML5, DocBook 5
(or 4.5) and other formats. Asciidoctor is written in Ruby, packaged as a RubyGem and published to RubyGems.org.</p>
</div>
<div class="paragraph">
<p>AsciiDoc belongs to the family of lightweight markup languages, the most renowned of which is Markdown. AsciiDoc stands
out from this group because it supports all the structural elements necessary for drafting articles, technical manuals,
books, presentations and prose. In fact, itâ€™s capable of meeting even the most advanced publishing requirements and
technical semantics.</p>
</div>
<div class="paragraph">
<p>Hereâ€™s a basic example of an AsciiDoc document:</p>
</div>
<div class="listingblock">
<div class="title">Listing 26. Sample AsciiDoc document</div>
<div class="content">
<pre class="highlight"><code class="language-asciidoctor" data-lang="asciidoctor">= Introduction to AsciiDoc
Doc Writer &lt;doc@example.com&gt;

A preface about http://asciidoc.org[AsciiDoc].

== First Section

* item 1
* item 2

[source,ruby]
puts "Hello, World!"</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_gradle">Gradle</h3>
<div class="paragraph">
<p>Gradle <a href="#gradle">[gradle]</a> is the build system used to produce this document in different formats, such as PDF and HTML.</p>
</div>
<div class="paragraph">
<p>Gradle provides:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A very flexible general purpose build tool like Ant.</p>
</li>
<li>
<p>Switchable, build-by-convention frameworks a la Maven. But we never lock you in!</p>
</li>
<li>
<p>Very powerful support for multi-project builds.</p>
</li>
<li>
<p>Very powerful dependency management (based on Apache Ivy).</p>
</li>
<li>
<p>Full support for your existing Maven or Ivy repository infrastructure.</p>
</li>
<li>
<p>Support for transitive dependency management without the need for remote repositories or pom.xml and ivy.xml files.</p>
</li>
<li>
<p>Ant tasks and builds as first class citizens.</p>
</li>
<li>
<p>Groovy build scripts.</p>
</li>
<li>
<p>A rich domain model for describing your build.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You run a Gradle build using the <code>gradle</code> command. The <code>gradle</code> command looks for a file called <code>build.gradle</code> in the
current directory. This <code>build.gradle</code> file is called a build script, although strictly speaking it is a build
configuration script. The build script defines a project and its tasks.</p>
</div>
<div class="listingblock">
<div class="title">Listing 27. Gradle build script example</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">task hello {
    doLast {
        println 'Hello world!'
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 28. Output of the previous build script</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ gradle -q hello
Hello world!</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_similar_solution_spring_security">Similar solution: Spring Security</h3>
<div class="paragraph">
<p>Spring Security is an authentication and access-control framework. It is the de-facto standard for securing Spring-based
applications. It has the following features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Comprehensive and extensible support for both Authentication and Authorization.</p>
</li>
<li>
<p>Protection against attacks like session fixation, clickjacking, cross site request forgery, etc.</p>
</li>
<li>
<p>Servlet API integration.</p>
</li>
<li>
<p>Optional integration with Spring Web MVC.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At an authentication level, Spring Security supports a wide range of authentication models. Most of these authentication
models are either provided by third parties, or are developed by relevant standards bodies such as the Internet
Engineering Task Force. In addition, Spring Security provides its own set of authentication features. Specifically,
Spring Security currently supports authentication integration with all of these technologies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP BASIC authentication headers (an IETF RFC-based standard).</p>
</li>
<li>
<p>HTTP Digest authentication headers (an IETF RFC-based standard).</p>
</li>
<li>
<p>HTTP X.509 client certificate exchange (an IETF RFC-based standard).</p>
</li>
<li>
<p>LDAP (a very common approach to cross-platform authentication needs, especially in large environments).</p>
</li>
<li>
<p>Form-based authentication (for simple user interface needs).</p>
</li>
<li>
<p>OpenID authentication.</p>
</li>
<li>
<p>Authentication based on pre-established request headers (such as Computer Associates Siteminder).</p>
</li>
<li>
<p>JA-SIG Central Authentication Service (otherwise known as CAS, which is a popular open source single sign-on system).</p>
</li>
<li>
<p>Transparent authentication context propagation for Remote Method Invocation (RMI) and HttpInvoker (a Spring remoting
protocol).</p>
</li>
<li>
<p>Automatic "remember-me" authentication (so you can tick a box to avoid re-authentication for a predetermined
period of time).</p>
</li>
<li>
<p>Anonymous authentication (allowing every unauthenticated call to automatically assume a particular security identity).</p>
</li>
<li>
<p>Run-as authentication (which is useful if one call should proceed with a different security identity).</p>
</li>
<li>
<p>Java Authentication and Authorization Service (JAAS)</p>
</li>
<li>
<p>JEE container autentication (so you can still use Container Managed Authentication if desired).</p>
</li>
<li>
<p>Kerberos.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It also integrates with a variety of technologies via third party implementations, such as Grails.</p>
</div>
<div class="sect3">
<h4 id="_the_spring_security_core_grails_plugin">The Spring Security Core Grails plugin</h4>
<div class="paragraph">
<p>For the Grails framework, there is an official plugin for authentication and authorisation: the Spring Security Core
Grails plugin <a href="#ss-core">[ss-core]</a>. It basically simplifies the usage of Spring Security in a Grails application.</p>
</div>
<div class="paragraph">
<p>Although there are alternative plugins for security services, we can consider Spring Security Core the de-facto option
as it is the official and supported plugin.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion">Conclusion</h3>
<div class="paragraph">
<p>Spring Security is not a viable solution due to 2 problems: the HTTP session usage and the lack of REST support.</p>
</div>
<div class="sect3">
<h4 id="_http_session">HTTP Session</h4>
<div class="paragraph">
<p>Spring Security is heavily based on the HTTP session. No matter what authentication mechanism the developer has configured,
the core authentication component, the <code>SecurityContext</code> will end up being backed by the HTTP session.</p>
</div>
<div class="paragraph">
<p>An HTTP session is a sequence of network request-response transactions. An HTTP client initiates a request by
establishing a TCP connection to a particular port on a server, An HTTP server listening on that port waits for a client&#8217;s
request message. Upon receiving the request, the server sends back a status line, such as <code>HTTP/1.1 200 OK</code>, and a
message of its own. The body of this message is typically the requested resource, although an error message or other
information may also be returned.</p>
</div>
<div class="paragraph">
<p>A session token is a unique identifier that is generated and sent from a server to a client to identify the current
interaction session. The client usually stores and sends the token as an HTTP cookie and/or sends it as a parameter in
GET or POST queries. The reason to use session tokens is that the client only has to handle the identifierâ€”all session
data is stored on the server (usually in a database, to which the client does not have direct access) linked to that
identifier.</p>
</div>
<div class="paragraph">
<p>Particularly in Java-based web applications, HTTP sessions are in-memory data structures. There are alternative
implementations where the HTTP Session is stored in databases or distributed caches. However, they require additional
configuration; there are also some caveats when using them, so in-memory storage is the option for most of the users.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>This state on the server side has the following problems:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Makes the solution stateful, thus violating a basic principle of a RESTful architecture: services must be stateless,
where is the client transferring its state to the server on every roundtrip.</p>
</li>
<li>
<p>It doesn&#8217;t play well with microservices as it makes the solution much more difficult to scale, as the HTTP session is
physically stored in the application server instance that first served that particular user. For this to work, the
web/proxy servers or load balancers in front of the application server must use sticky sessions.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A sticky session is bound (<em>sticky</em>) to a particular application server instance, so that all the requests from that user
will be routed directly to such instance. In order to do so, proxies/balancers store a cookie when the first request is
sent to an instance. In following requests, the balancer will be able to route them to this particular instance by
reading the cookie.</p>
</div>
<div class="paragraph">
<p>In a microservice architecture, it should be possible to spin up multiple instances of a microservice to cope with
load increments. And any instance should be able to respond to any request. With sticky HTTP sessions, this is not
possible.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="_lack_of_rest_support">Lack of REST support</h4>
<div class="paragraph">
<p>In REST, data is normally sent and received in JSON format. For an authentication request, this is how we would like it
to work:</p>
</div>
<div class="listingblock">
<div class="title">Listing 29. Ideal authentication request in a RESTful architecture</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">POST /login HTTP/1.1
Host: api.example.com
Content-Type: application/json

{
    "username": "admin",
    "password": "secret"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, this is how it works in Spring Security:</p>
</div>
<div class="listingblock">
<div class="title">Listing 30. Actual authentication request in Spring Security</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">POST /j_spring_security_check HTTP/1.1
Host: api.example.com
Content-Type: application/x-www-form-urlencoded

j_username=admin&amp;j_password=secret</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, it&#8217;s far from RESTful.</p>
</div>
<div class="paragraph">
<p>For all the reasons explained above, Spring Security is not a viable solution, therefore creating Spring Security REST
is an actual need for the development community.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-10-04 18:08:33 UTC
</div>
</div>
</body>
</html>