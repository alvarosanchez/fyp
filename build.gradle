import org.ajoberstar.grgit.*

plugins {
  id 'org.ajoberstar.github-pages' version '1.1.0'
  id 'org.asciidoctor.gradle.asciidoctor' version '1.5.1'
  id 'org.asciidoctor.convert' version '1.5.2'
}

githubPages {
  repoUri = 'https://github.com/alvarosanchez/fyp.git' // Set this to the destination repo

  credentials {
    username = project.hasProperty('githubToken') ? project.githubToken : ''
    password = ''
  }

  pages {
    from file(asciidoctor.outputDir.path + '/html5')
  }
}

version = '1.0.0-SNAPSHOT'

asciidoctor {
    options doctype: 'book', ruby: 'erubis'

    attributes  'build-gradle'      : file('build.gradle'),
                'source-highlighter': 'coderay',
                toc                 : '',
                idprefix            : '',
                idseparator         : '-',
                docinfo1            : ''           
}

publishGhPages.dependsOn asciidoctor
